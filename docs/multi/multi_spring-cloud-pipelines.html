<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Spring Cloud Pipelines</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="multi_spring-cloud-pipelines.html" title="Spring Cloud Pipelines"><link rel="next" href="multi_pr01.html" title=""></head><body class="firstpage" bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Spring Cloud Pipelines</th></tr><tr><td width="20%" align="left">&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="multi_pr01.html">Next</a></td></tr></table><hr></div><div lang="en" class="book"><div class="titlepage"><div><div><h1 class="title"><a name="d0e3"></a>Spring Cloud Pipelines</h1></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="preface"><a href="multi_pr01.html"></a></span></dt><dt><span class="chapter"><a href="multi__introduction.html">1. Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="multi__introduction.html#_project_setup">1.1. Project setup</a></span></dt><dt><span class="section"><a href="multi__introduction.html#_how_to_use_it">1.2. How to use it?</a></span></dt><dd><dl><dt><span class="section"><a href="multi__introduction.html#_centralized_pipeline_creation">1.2.1. Centralized pipeline creation</a></span></dt><dt><span class="section"><a href="multi__introduction.html#_pipeline_per_repository">1.2.2. Pipeline per repository</a></span></dt></dl></dd><dt><span class="section"><a href="multi__introduction.html#_the_flow">1.3. The flow</a></span></dt><dt><span class="section"><a href="multi__introduction.html#_environments">1.4. Environments</a></span></dt><dt><span class="section"><a href="multi__introduction.html#_tests">1.5. Tests</a></span></dt><dd><dl><dt><span class="section"><a href="multi__introduction.html#_testing_against_stubs">1.5.1. Testing against stubs</a></span></dt><dt><span class="section"><a href="multi__introduction.html#_general_view">1.5.2. General view</a></span></dt></dl></dd><dt><span class="section"><a href="multi__introduction.html#_ci_server_worker_prerequisites">1.6. CI Server worker prerequisites</a></span></dt><dt><span class="section"><a href="multi__introduction.html#_pipeline_descriptor">1.7. Pipeline descriptor</a></span></dt><dd><dl><dt><span class="section"><a href="multi__introduction.html#_pipeline_descriptor_for_cloud_foundry">1.7.1. Pipeline descriptor for Cloud Foundry</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="multi__opinionated_implementation.html">2. Opinionated implementation</a></span></dt><dd><dl><dt><span class="section"><a href="multi__opinionated_implementation.html#_build">2.1. Build</a></span></dt><dt><span class="section"><a href="multi__opinionated_implementation.html#_test">2.2. Test</a></span></dt><dt><span class="section"><a href="multi__opinionated_implementation.html#_stage">2.3. Stage</a></span></dt><dt><span class="section"><a href="multi__opinionated_implementation.html#_prod">2.4. Prod</a></span></dt></dl></dd><dt><span class="chapter"><a href="multi__project_opinions.html">3. Project opinions</a></span></dt><dd><dl><dt><span class="section"><a href="multi__project_opinions.html#_cloud_foundry_project_opinions">3.1. Cloud Foundry project opinions</a></span></dt><dt><span class="section"><a href="multi__project_opinions.html#_kubernetes_project_opinions">3.2. Kubernetes project opinions</a></span></dt></dl></dd><dt><span class="chapter"><a href="multi_concourse-pipeline-cf.html">4. Concourse Pipeline (Cloud Foundry)</a></span></dt><dd><dl><dt><span class="section"><a href="multi_concourse-pipeline-cf.html#concourse-pipeline-step-by-step-cf">4.1. Step by step</a></span></dt><dd><dl><dt><span class="section"><a href="multi_concourse-pipeline-cf.html#concourse-fork-cf">4.1.1. Fork repos</a></span></dt><dt><span class="section"><a href="multi_concourse-pipeline-cf.html#concourse-start-cf">4.1.2. Start Concourse and Artifactory</a></span></dt><dd><dl><dt><span class="section"><a href="multi_concourse-pipeline-cf.html#concourse-deploy-cf">Deploy the infra JARs to Artifactory</a></span></dt></dl></dd><dt><span class="section"><a href="multi_concourse-pipeline-cf.html#concourse-pcfdev-cf">4.1.3. Start PCF Dev</a></span></dt><dt><span class="section"><a href="multi_concourse-pipeline-cf.html#concourse-fly-cf">4.1.4. Setup the <code class="literal">fly</code> CLI</a></span></dt><dt><span class="section"><a href="multi_concourse-pipeline-cf.html#concourse-credentials-cf">4.1.5. Setup your <code class="literal">credentials.yml</code></a></span></dt><dt><span class="section"><a href="multi_concourse-pipeline-cf.html#concourse-build-cf">4.1.6. Build the pipeline</a></span></dt><dt><span class="section"><a href="multi_concourse-pipeline-cf.html#concourse-run-cf">4.1.7. Run the <code class="literal">github-webhook</code> pipeline</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="multi_concourse-pipeline-k8s.html">5. Concourse Pipeline (Kubernetes)</a></span></dt><dd><dl><dt><span class="section"><a href="multi_concourse-pipeline-k8s.html#step-by-step-k8s">5.1. Step by step</a></span></dt><dd><dl><dt><span class="section"><a href="multi_concourse-pipeline-k8s.html#fork-repos-k8s">5.1.1. Fork repos</a></span></dt></dl></dd><dt><span class="section"><a href="multi_concourse-pipeline-k8s.html#concourse-start-k8s">5.2. Concourse in K8S (Kubernetes)</a></span></dt><dd><dl><dt><span class="section"><a href="multi_concourse-pipeline-k8s.html#_deploying_artifactory_to_k8s">5.2.1. Deploying Artifactory to K8S</a></span></dt><dt><span class="section"><a href="multi_concourse-pipeline-k8s.html#concourse-pipeline-fly-k8s">5.2.2. Setup the <code class="literal">fly</code> CLI</a></span></dt><dt><span class="section"><a href="multi_concourse-pipeline-k8s.html#concourse-pipeline-credentials-k8s">5.2.3. Setup your <code class="literal">credentials.yml</code></a></span></dt><dt><span class="section"><a href="multi_concourse-pipeline-k8s.html#concourse-pipeline-build-k8s">5.2.4. Build the pipeline</a></span></dt><dt><span class="section"><a href="multi_concourse-pipeline-k8s.html#concourse-pipeline-run-k8s">5.2.5. Run the <code class="literal">github-webhook</code> pipeline</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="multi_concourse-faq.html">6. Concourse FAQ</a></span></dt><dd><dl><dt><span class="section"><a href="multi_concourse-faq.html#_can_i_use_the_pipeline_for_some_other_repos">6.1. Can I use the pipeline for some other repos?</a></span></dt><dt><span class="section"><a href="multi_concourse-faq.html#_will_this_work_for_any_project_out_of_the_box">6.2. Will this work for ANY project out of the box?</a></span></dt><dt><span class="section"><a href="multi_concourse-faq.html#_can_i_modify_this_to_reuse_in_my_project">6.3. Can I modify this to reuse in my project?</a></span></dt><dt><span class="section"><a href="multi_concourse-faq.html#_i_ran_out_of_resources_pcf_dev">6.4. I ran out of resources!! (PCF Dev)</a></span></dt><dt><span class="section"><a href="multi_concourse-faq.html#_the_rollback_step_fails_due_to_missing_jar">6.5. The rollback step fails due to missing JAR ?!</a></span></dt><dt><span class="section"><a href="multi_concourse-faq.html#_can_i_see_the_output_of_a_job_from_the_terminal">6.6. Can I see the output of a job from the terminal?</a></span></dt><dt><span class="section"><a href="multi_concourse-faq.html#_i_clicked_the_job_and_it_s_constantly_pending">6.7. I clicked the job and it&#8217;s constantly pending&#8230;&#8203;</a></span></dt><dt><span class="section"><a href="multi_concourse-faq.html#_the_route_is_already_in_use_cf">6.8. The route is already in use (CF)</a></span></dt><dt><span class="section"><a href="multi_concourse-faq.html#_i_m_unauthorized_to_deploy_infrastructure_jars">6.9. I&#8217;m unauthorized to deploy infrastructure jars</a></span></dt><dt><span class="section"><a href="multi_concourse-faq.html#__literal_version_literal_resource_is_broken">6.10. <code class="literal">version</code> resource is broken</a></span></dt></dl></dd><dt><span class="chapter"><a href="multi__jenkins_pipeline_common.html">7. Jenkins Pipeline (Common)</a></span></dt><dd><dl><dt><span class="section"><a href="multi__jenkins_pipeline_common.html#_project_setup_2">7.1. Project setup</a></span></dt><dt><span class="section"><a href="multi__jenkins_pipeline_common.html#_optional_customization_steps">7.2. Optional customization steps</a></span></dt><dd><dl><dt><span class="section"><a href="multi__jenkins_pipeline_common.html#deploying-infra">7.2.1. Deploying infra jars to a different location</a></span></dt><dt><span class="section"><a href="multi__jenkins_pipeline_common.html#setup-settings-xml">7.2.2. Setup settings.xml for Maven deployment</a></span></dt><dt><span class="section"><a href="multi__jenkins_pipeline_common.html#setup-jenkins-env-vars">7.2.3. Setup Jenkins env vars</a></span></dt><dd><dl><dt><span class="section"><a href="multi__jenkins_pipeline_common.html#setup-seed-props">Seed properties</a></span></dt><dt><span class="section"><a href="multi__jenkins_pipeline_common.html#global-envs">Global envs</a></span></dt></dl></dd><dt><span class="section"><a href="multi__jenkins_pipeline_common.html#git-email">7.2.4. Set Git email / user</a></span></dt><dd><dl><dt><span class="section"><a href="multi__jenkins_pipeline_common.html#jenkins-credentials-github">Add Jenkins credentials for GitHub</a></span></dt></dl></dd></dl></dd><dt><span class="section"><a href="multi__jenkins_pipeline_common.html#_testing_jenkins_scripts">7.3. Testing Jenkins scripts</a></span></dt><dt><span class="section"><a href="multi__jenkins_pipeline_common.html#_how_to_work_with_jenkins_job_dsl_plugin">7.4. How to work with Jenkins Job DSL plugin</a></span></dt><dt><span class="section"><a href="multi__jenkins_pipeline_common.html#_docker_image">7.5. Docker Image</a></span></dt></dl></dd><dt><span class="chapter"><a href="multi_jenkins-pipeline-cf.html">8. Jenkins Pipeline (Cloud Foundry)</a></span></dt><dd><dl><dt><span class="section"><a href="multi_jenkins-pipeline-cf.html#step-by-step-cf">8.1. Step by step</a></span></dt><dd><dl><dt><span class="section"><a href="multi_jenkins-pipeline-cf.html#fork-repos-cf">8.1.1. Fork repos</a></span></dt><dt><span class="section"><a href="multi_jenkins-pipeline-cf.html#start-jenkins-cf">8.1.2. Start Jenkins and Artifactory</a></span></dt><dd><dl><dt><span class="section"><a href="multi_jenkins-pipeline-cf.html#deploy-infra-cf">Deploy the infra JARs to Artifactory</a></span></dt></dl></dd><dt><span class="section"><a href="multi_jenkins-pipeline-cf.html#start-pcf-dev-cf">8.1.3. Start PCF Dev</a></span></dt><dt><span class="section"><a href="multi_jenkins-pipeline-cf.html#jenkins-seed-cf">8.1.4. Run the seed job</a></span></dt><dt><span class="section"><a href="multi_jenkins-pipeline-cf.html#jenkins-pipeline-cf">8.1.5. Run the <code class="literal">github-webhook</code> pipeline</a></span></dt></dl></dd><dt><span class="section"><a href="multi_jenkins-pipeline-cf.html#declarative-pipeline-cf">8.2. Declarative pipeline &amp; Blue Ocean</a></span></dt><dt><span class="section"><a href="multi_jenkins-pipeline-cf.html#optional-steps-cf">8.3. Jenkins Cloud Foundry customization</a></span></dt><dd><dl><dt><span class="section"><a href="multi_jenkins-pipeline-cf.html#all-env-vars-cf">8.3.1. All env vars</a></span></dt><dt><span class="section"><a href="multi_jenkins-pipeline-cf.html#jenkins-credentials-cf">8.3.2. Jenkins Credentials</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="multi_jenkins-pipeline-k8s.html">9. Jenkins Pipeline (Kubernetes)</a></span></dt><dd><dl><dt><span class="section"><a href="multi_jenkins-pipeline-k8s.html#step-by-step-k8s">9.1. Step by step</a></span></dt><dd><dl><dt><span class="section"><a href="multi_jenkins-pipeline-k8s.html#fork-repos-k8s">9.1.1. Fork repos</a></span></dt><dt><span class="section"><a href="multi_jenkins-pipeline-k8s.html#start-jenkins-k8s">9.1.2. Start Jenkins and Artifactory</a></span></dt><dd><dl><dt><span class="section"><a href="multi_jenkins-pipeline-k8s.html#deploy-infra-k8s">Deploy the infra JARs to Artifactory</a></span></dt></dl></dd><dt><span class="section"><a href="multi_jenkins-pipeline-k8s.html#jenkins-seed-k8s">9.1.3. Run the seed job</a></span></dt><dt><span class="section"><a href="multi_jenkins-pipeline-k8s.html#jenkins-pipeline-k8s">9.1.4. Run the <code class="literal">github-webhook</code> pipeline</a></span></dt></dl></dd><dt><span class="section"><a href="multi_jenkins-pipeline-k8s.html#declarative-pipeline-k8s">9.2. Declarative pipeline &amp; Blue Ocean</a></span></dt><dt><span class="section"><a href="multi_jenkins-pipeline-k8s.html#optional-steps-k8s">9.3. Jenkins Kubernetes customization</a></span></dt><dd><dl><dt><span class="section"><a href="multi_jenkins-pipeline-k8s.html#all-env-vars-k8s">9.3.1. All env vars</a></span></dt></dl></dd><dt><span class="section"><a href="multi_jenkins-pipeline-k8s.html#_preparing_to_connect_to_gce">9.4. Preparing to connect to GCE</a></span></dt><dt><span class="section"><a href="multi_jenkins-pipeline-k8s.html#_connecting_to_a_kubo_or_gce_cluster">9.5. Connecting to a Kubo or GCE cluster</a></span></dt></dl></dd><dt><span class="chapter"><a href="multi__jenkins_faq.html">10. Jenkins FAQ</a></span></dt><dd><dl><dt><span class="section"><a href="multi__jenkins_faq.html#jenkins_faq">10.1. Pipeline version contains ${PIPELINE_VERSION}</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_pipeline_version_is_not_passed_to_the_build">10.2. Pipeline version is not passed to the build</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_the_build_times_out_with_literal_pipeline_sh_literal_info">10.3. The build times out with <code class="literal">pipeline.sh</code> info</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_can_i_use_the_pipeline_for_some_other_repos_2">10.4. Can I use the pipeline for some other repos?</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_will_this_work_for_any_project_out_of_the_box_2">10.5. Will this work for ANY project out of the box?</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_can_i_modify_this_to_reuse_in_my_project_2">10.6. Can I modify this to reuse in my project?</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_the_rollback_step_fails_due_to_missing_jar_2">10.7. The rollback step fails due to missing JAR ?!</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_i_want_to_provide_a_different_jdk_version">10.8. I want to provide a different JDK version</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#groovy-token-macro">10.9. Enable Groovy Token Macro Processing</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_i_want_deployment_to_stage_and_prod_be_automatic">10.10. I want deployment to stage and prod be automatic</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_i_don_t_want_to_test_api_compativility">10.11. I don&#8217;t want to test API compativility</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_i_can_t_tag_the_repo">10.12. I can&#8217;t tag the repo!</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_i_m_unauthorized_to_deploy_infrastructure_jars_2">10.13. I&#8217;m unauthorized to deploy infrastructure jars</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_signing_artifacts">10.14. Signing Artifacts</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_using_ssh_keys_for_git">10.15. Using SSH keys for git</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_deploy_to_stage_fails_and_doesn_t_redeploy_a_service_kubernetes">10.16. Deploy to stage fails and doesn&#8217;t redeploy a service (Kubernetes)</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_i_ran_out_of_resources_cloud_foundry">10.17. I ran out of resources!! (Cloud Foundry)</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_deploying_to_test_stage_prod_fails_error_finding_space_cloud_foundry">10.18. Deploying to test / stage / prod fails - error finding space (Cloud Foundry)</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_the_route_is_already_in_use_cloud_foundry">10.19. The route is already in use (Cloud Foundry)</a></span></dt><dt><span class="section"><a href="multi__jenkins_faq.html#_how_to_execute_helper_scripts_against_a_real_cf_instance_i_m_logged_into_cloud_foundry">10.20. How to execute helper scripts against a real CF instance I&#8217;m logged into (Cloud Foundry)</a></span></dt></dl></dd><dt><span class="chapter"><a href="multi__kubernetes_setup.html">11. Kubernetes setup</a></span></dt><dd><dl><dt><span class="section"><a href="multi__kubernetes_setup.html#_kubernetes_cli_installation">11.1. Kubernetes CLI Installation</a></span></dt><dd><dl><dt><span class="section"><a href="multi__kubernetes_setup.html#kubernetes-cli-script">11.1.1. Script Installation</a></span></dt><dt><span class="section"><a href="multi__kubernetes_setup.html#kubernetes-cli-manual">11.1.2. Manual Installation</a></span></dt></dl></dd><dt><span class="section"><a href="multi__kubernetes_setup.html#start-minikube-k8s">11.2. Kubernetes Cluster setup</a></span></dt><dd><dl><dt><span class="section"><a href="multi__kubernetes_setup.html#kubernetes-minikube-script">11.2.1. Script Installation</a></span></dt><dt><span class="section"><a href="multi__kubernetes_setup.html#kubernetes-minikube-manual">11.2.2. Manual Installation</a></span></dt></dl></dd><dt><span class="section"><a href="multi__kubernetes_setup.html#_run_minikube">11.3. Run Minikube</a></span></dt><dt><span class="section"><a href="multi__kubernetes_setup.html#_certificates_and_workers">11.4. Certificates and Workers</a></span></dt><dd><dl><dt><span class="section"><a href="multi__kubernetes_setup.html#_minikube_certificates_and_workers">11.4.1. Minikube Certificates and Workers</a></span></dt><dt><span class="section"><a href="multi__kubernetes_setup.html#_manual_certificates_and_workers_setup">11.4.2. Manual Certificates and Workers Setup</a></span></dt></dl></dd><dt><span class="section"><a href="multi__kubernetes_setup.html#_generate_minikube_namespaces">11.5. Generate Minikube namespaces</a></span></dt></dl></dd><dt><span class="chapter"><a href="multi__the_demo_setup_cloud_foundry.html">12. The demo setup (Cloud Foundry)</a></span></dt><dd><dl><dt><span class="section"><a href="multi__the_demo_setup_cloud_foundry.html#_deploying_production_applications_to_pcf_dev">12.1. Deploying production applications to PCF Dev</a></span></dt><dt><span class="section"><a href="multi__the_demo_setup_cloud_foundry.html#_running_prometheus_on_cf">12.2. Running Prometheus on CF</a></span></dt><dt><span class="section"><a href="multi__the_demo_setup_cloud_foundry.html#_running_grafana_on_cf">12.3. Running Grafana on CF</a></span></dt></dl></dd><dt><span class="chapter"><a href="multi__the_demo_setup_kubernetes.html">13. The demo setup (Kubernetes)</a></span></dt><dd><dl><dt><span class="section"><a href="multi__the_demo_setup_kubernetes.html#_deploying_production_applications_to_minikube">13.1. Deploying production applications to Minikube</a></span></dt><dt><span class="section"><a href="multi__the_demo_setup_kubernetes.html#_running_prometheus_on_kubernetes">13.2. Running Prometheus on Kubernetes</a></span></dt><dt><span class="section"><a href="multi__the_demo_setup_kubernetes.html#_running_grafana_on_kubernetes">13.3. Running Grafana on Kubernetes</a></span></dt></dl></dd><dt><span class="chapter"><a href="multi__step_by_step_cloud_foundry_migration.html">14. Step by step Cloud Foundry migration</a></span></dt><dt><span class="chapter"><a href="multi__building_the_project.html">15. Building the project</a></span></dt><dd><dl><dt><span class="section"><a href="multi__building_the_project.html#_prerequisites">15.1. Prerequisites</a></span></dt><dt><span class="section"><a href="multi__building_the_project.html#_bats_submodules">15.2. Bats submodules</a></span></dt><dt><span class="section"><a href="multi__building_the_project.html#_build_and_test">15.3. Build and test</a></span></dt><dt><span class="section"><a href="multi__building_the_project.html#_generate_docs">15.4. Generate docs</a></span></dt><dt><span class="section"><a href="multi__building_the_project.html#_making_a_release">15.5. Making a release</a></span></dt></dl></dd><dt><span class="chapter"><a href="multi__customizing_the_project.html">16. Customizing the project</a></span></dt><dt><span class="chapter"><a href="multi__releasing_the_project.html">17. Releasing the project</a></span></dt><dd><dl><dt><span class="section"><a href="multi__releasing_the_project.html#_publishing_a_docker_image">17.1. Publishing A Docker Image</a></span></dt></dl></dd></dl></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left">&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;<a accesskey="n" href="multi_pr01.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right" valign="top">&nbsp;</td></tr></table></div></body></html>